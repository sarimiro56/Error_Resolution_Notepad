# e_fail (0x80004005) / runtime (-103)

![image](https://github.com/sarimiro56/Error_Resolution_Notepad/assets/128454837/eb17e174-d2f9-4641-8251-6768a3a30e45)

:   상황설명

UsersFolderError.md 에 적힌 상황과 이어진다.
사용자 파일명을 건드린 댓가로 VirtualBox에 있던 가상머신들이 작동을 하지 않게 되었다.
위에 올려둔 사진처럼 에러가 뜨고 있는 상황인 것이다.

:    에러발생 코드

    Runtime error opening 'C:\Users\태은선\VirtualBox VMs\fedora\fedora.vbox' for reading: -103 (Path not found.).
    F:\tinderbox\win-6.1\src\VBox\Main\src-server\MachineImpl.cpp[754] (long __cdecl Machine::i_registeredInit(void)).
    결과 코드: 
    E_FAIL (0x80004005)
    구성 요소: 
    MachineWrap
    인터페이스: 
    IMachine {85632c68-b5bb-4316-a900-5eb28d3413df}

    C:/Users/eunseon/VirtualBox VMs/fedora/fedora.vbox에 있는 가상 머신을 열 수 없습니다.
    Trying to open a VM config 'C:/Users/eunseon/VirtualBox VMs/fedora/fedora.vbox' which has the same UUID as an existing virtual machine.
    Result Code:
    E_FAIL (0X80004005)
    Component:
    MachineWrap
    Interface:
    IMachine {300763af-5d6b-46e6-aa96-273eac15538a}
    Callee:
    IVirtualBox {7682d5eb-f00e-44f1-8ca2-99d08b1cd607}




:    해결 방법

인터넷에 있던 방법들이나 ChatGPT에게 물어본다 해도 어떠한 방법도 소용이 없었다. 인식 자체가 안 되었으니까.
두 방법들이 알려준 방법들은 이랬다.
인터넷 : 파일명을 변경하거나 VirtualBox를 최신버전으로 업데이트하라.
ChatGPT: 텍스트 편집기를 이용하여 파일 내부를 뜯어고쳐라.

![image](https://github.com/sarimiro56/Error_Resolution_Notepad/assets/128454837/0a15a576-6a4d-4481-ae5f-5187ba8ca296)
인터넷 같은 경우에는 https://forums.virtualbox.org/viewtopic.php?t=33196 이쪽을 참고하였는데,
이 방법은 [가상머신명].vbox 를 [가상머신명].vbox-prev로, [가상머신명].vbox-prev를 [가상머신명].vbox로 바꾸는 식 또는 .xml로 바꾸는
파일 확장명 바꾸는 걸로 작동 시키는 것이었다.
그러나 바꾸고 프로그램을 재실행해봐도 결과는 똑같았고, VirtualBox를 최신으로 업데이트 해도 똑같은 상황이었다.

ChatGPT는 저 폴더에 있는 [가상머신명].vbox를 텍스트 편집기(메모장)으로 열어 파일 경로명을 수정하라는 것이었는데,

    <?xml version="1.0"?>
    <!--
    ** DO NOT EDIT THIS FILE.
    ** If you make changes to this file while any VirtualBox related application
    ** is running, your changes will be overwritten later, without taking effect.
    ** Use VBoxManage or the VirtualBox Manager GUI to make changes.
    -->
    <VirtualBox xmlns="http://www.virtualbox.org/" version="1.16-windows">
      <Machine uuid="{a9ceb81b-c1bd-4b3e-b43e-112e39689edf}" name="fedora" OSType="Fedora_64" snapshotFolder="Snapshots" lastStateChange="2023-06-12T06:23:00Z">
        <MediaRegistry>
          <HardDisks>
            <HardDisk uuid="{66746ce6-3612-463c-9f71-6d9512a1a4b7}" location="fedora.vdi" format="VDI" type="Normal"/>
          </HardDisks>
          <DVDImages>
            <Image uuid="{925ca232-eeaf-4fab-9ce5-9b2865c0b686}" location="C:/Users/&#xD0DC;&#xC740;&#xC120;/Downloads/Fedora-Workstation-Live-x86_64-37-1.7.iso"/>
          </DVDImages>
        </MediaRegistry>
        <ExtraData>
          <ExtraDataItem name="GUI/LastCloseAction" value="PowerOff"/>
          <ExtraDataItem name="GUI/LastGuestSizeHint" value="1920,975"/>
          <ExtraDataItem name="GUI/LastNormalWindowPosition" value="1,25,1903,1000"/>
          <ExtraDataItem name="GUI/ScaleFactor" value="1"/>
        </ExtraData>
        <Hardware>
          <CPU>
            <PAE enabled="false"/>
            <LongMode enabled="true"/>
            <X2APIC enabled="true"/>
            <HardwareVirtExLargePages enabled="true"/>
          </CPU>
          <Memory RAMSize="9170"/>
          <HID Pointing="USBTablet"/>
          <Display controller="VMSVGA" VRAMSize="16"/>
          <BIOS>
            <IOAPIC enabled="true"/>
            <SmbiosUuidLittleEndian enabled="true"/>
          </BIOS>
          <USB>
            <Controllers>
              <Controller name="OHCI" type="OHCI"/>
            </Controllers>
          </USB>
          <Network>
            <Adapter slot="0" enabled="true" MACAddress="080027B32CB8" type="82540EM">
              <NAT>
                <Forwarding name="Rule 1" proto="1" hostport="8000" guestport="8000"/>
                <Forwarding name="Rule 2" proto="1" hostport="22" guestport="22"/>
                <Forwarding name="Rule 3" proto="1" hostport="80" guestport="80"/>
              </NAT>
            </Adapter>
          </Network>
          <AudioAdapter codec="AD1980" driver="DirectSound" enabled="true" enabledIn="false"/>
          <RTC localOrUTC="UTC"/>
          <Clipboard/>
          <GuestProperties>
            <GuestProperty name="/VirtualBox/GuestAdd/HostVerLastChecked" value="6.1.42" timestamp="1686545766900998700" flags=""/>
            <GuestProperty name="/VirtualBox/GuestAdd/Revision" value="156879" timestamp="1686545738044930600" flags=""/>
            <GuestProperty name="/VirtualBox/GuestAdd/Version" value="7.0.8" timestamp="1686545738043927600" flags=""/>
            <GuestProperty name="/VirtualBox/GuestAdd/VersionExt" value="7.0.8_Fedora" timestamp="1686545738043927601" flags=""/>
            <GuestProperty name="/VirtualBox/GuestInfo/OS/Product" value="Linux" timestamp="1686545738038098900" flags=""/>
            <GuestProperty name="/VirtualBox/GuestInfo/OS/Release" value="6.2.15-200.fc37.x86_64" timestamp="1686545738042978900" flags=""/>
            <GuestProperty name="/VirtualBox/GuestInfo/OS/Version" value="#1 SMP PREEMPT_DYNAMIC Thu May 11 15:56:33 UTC 2023" timestamp="1686545738042978901" flags=""/>
            <GuestProperty name="/VirtualBox/HostInfo/GUI/LanguageID" value="ko_KR" timestamp="1686550980490350500" flags=""/>
          </GuestProperties>
        </Hardware>
        <StorageControllers>
          <StorageController name="IDE" type="PIIX4" PortCount="2" useHostIOCache="true" Bootable="true">
            <AttachedDevice passthrough="false" type="DVD" hotpluggable="false" port="1" device="0"/>
          </StorageController>
          <StorageController name="SATA" type="AHCI" PortCount="1" useHostIOCache="false" Bootable="true" IDE0MasterEmulationPort="0" IDE0SlaveEmulationPort="1" IDE1MasterEmulationPort="2" IDE1SlaveEmulationPort="3">
            <AttachedDevice type="HardDisk" hotpluggable="false" port="0" device="0">
              <Image uuid="{66746ce6-3612-463c-9f71-6d9512a1a4b7}"/>
            </AttachedDevice>
          </StorageController>
        </StorageControllers>
        <VideoCapture screens="1" options="vc_enabled=true,ac_enabled=true,ac_profile=med" fps="25"/>
      </Machine>
    </VirtualBox>

열어보면 이런 코드가 나온다.
이 곳에서 수정할 파일 경로명은 <!-- <Image uuid="{925ca232-eeaf-4fab-9ce5-9b2865c0b686}" location="C:/Users/&#xD0DC;&#xC740;&#xC120;/Downloads/Fedora-Workstation-Live-x86_64-37-1.7.iso"/> --> 에 있는
location을 C:\Users\eunseon\Downloads\Fedora-Workstation-Live-x86_64-37-1.7.iso 처럼 현재 사용자 폴더명으로 변경 시키면 실행 된다고 했다.
그러나 이것 조차도 인식이 안 되었는지 실행이 되지 않아 ChatGPT랑 한참동안 얘기를 하다가...
드디어 방법이 나왔다.

VirtualBox VM 안에 있는 가상머신 파일에서 .vdi라는 파일이 존재할 것이다.
이는 가상머신의 하드디스크 파일인데, 운영체제와 그 안의 데이터들까지 저장되어있는 파일이라고 볼 수 있다.

이게 멀쩡히 살아있다면 기존의 가상머신은 버리고 새 가상머신에 .vdi 파일을 연결하면 된다.

![image](https://github.com/sarimiro56/Error_Resolution_Notepad/assets/128454837/42b9b218-07fa-4703-bdda-ea9d80535682)

1. 새로운 가상 머신을 만든다.

![image](https://github.com/sarimiro56/Error_Resolution_Notepad/assets/128454837/dd2f0f72-cee7-46c1-8604-d38547b7a91a)

2. 새로 만든 가상머신의 .vdi를 복구하고 싶은 .vdi 파일로 변경하고 실행한다.

![image](https://github.com/sarimiro56/Error_Resolution_Notepad/assets/128454837/987e6bc4-373c-494a-b502-37db5171e387)

로그인, 업데이트, 파일들까지 문제없이 잘 작동된다!
